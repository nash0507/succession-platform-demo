<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第7組 - 接班預警 × 平台介入架構展示</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .fade-in { animation: fadeIn 0.6s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .hidden-section { display: none; }
        .loading-spinner { animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* 模擬合約樣式 */
        .legal-paper {
            background-color: #fff;
            border: 1px solid #d1d5db;
            padding: 20px;
            font-family: "Courier New", Courier, monospace;
            font-size: 0.85rem;
            color: #374151;
            height: 250px;
            overflow-y: scroll;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }
        .stamp {
            border: 3px solid #ef4444;
            color: #ef4444;
            font-weight: bold;
            padding: 5px 10px;
            text-transform: uppercase;
            border-radius: 5px;
            transform: rotate(-5deg);
            display: inline-block;
            animation: stamp-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        @keyframes stamp-in { from { transform: scale(2) rotate(0deg); opacity: 0; } to { transform: scale(1) rotate(-5deg); opacity: 1; } }
    </style>
</head>
<body class="bg-gray-100 font-sans text-gray-800">

    <nav class="bg-white shadow-sm fixed w-full z-50">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <div class="flex items-center cursor-pointer" onclick="showSection('landing')">
                <span class="text-xl font-bold text-gray-800"><i class="fas fa-project-diagram mr-2 text-blue-600"></i>接班預警 × 平台介入架構</span>
            </div>
            <div class="text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full">第7組專題成果展示</div>
        </div>
    </nav>

    <div id="valuationModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white w-full max-w-lg rounded-xl shadow-2xl p-6 mx-4">
            <div class="flex justify-between items-center mb-4 border-b pb-2">
                <h3 class="text-xl font-bold text-yellow-700"><i class="fas fa-calculator mr-2"></i>AI 企業估值模擬系統</h3>
                <button onclick="closeModal('valuationModal')" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times"></i></button>
            </div>
            
            <div id="valuationInput">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">所屬產業</label>
                        <select id="industry" class="w-full border rounded p-2 bg-gray-50">
                            <option value="software">軟體/SaaS (高倍數)</option>
                            <option value="manufacturing">傳統製造 (中倍數)</option>
                            <option value="retail">餐飲零售 (一般倍數)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">年度營收 (Revenue)</label>
                        <div class="relative">
                            <span class="absolute left-3 top-2 text-gray-500">NT$</span>
                            <input type="number" id="revenue" class="w-full border rounded p-2 pl-10" placeholder="例如: 50000000">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">稅前淨利 (EBITDA)</label>
                        <div class="relative">
                            <span class="absolute left-3 top-2 text-gray-500">NT$</span>
                            <input type="number" id="ebitda" class="w-full border rounded p-2 pl-10" placeholder="例如: 8000000">
                        </div>
                    </div>
                    <button onclick="runValuation()" class="w-full bg-yellow-500 text-white font-bold py-3 rounded hover:bg-yellow-600 transition mt-2">
                        開始 AI 運算
                    </button>
                </div>
            </div>

            <div id="valuationLoading" class="hidden py-10 text-center">
                <i class="fas fa-spinner loading-spinner text-4xl text-yellow-500 mb-4"></i>
                <p class="text-gray-600 font-bold">正在分析同業成交數據...</p>
                <p class="text-xs text-gray-400 mt-2">比對資料庫 1,240 筆交易紀錄</p>
            </div>

            <div id="valuationResult" class="hidden">
                <div class="bg-green-50 border border-green-200 rounded-lg p-4 text-center mb-4">
                    <p class="text-sm text-gray-600 mb-1">根據 EBITDA 倍數法推算，您的企業估值區間為：</p>
                    <div class="text-3xl font-bold text-green-700 my-2">
                        <span id="valMin"></span> ~ <span id="valMax"></span> 萬
                    </div>
                    <div class="text-xs text-gray-500">信心水準: 85% | 參考樣本: 32 間同規模企業</div>
                </div>
                <div class="text-xs text-gray-400 mb-4 text-justify">
                    *此估值僅供參考，實際成交價可能因專利、團隊留任狀況而有溢價。建議諮詢平台顧問進行深度DD。
                </div>
                <button onclick="closeModal('valuationModal')" class="w-full border border-gray-300 text-gray-600 py-2 rounded hover:bg-gray-100">
                    關閉並儲存報告
                </button>
            </div>
        </div>
    </div>

    <div id="ndaModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white w-full max-w-2xl rounded-xl shadow-2xl p-6 mx-4">
            <div class="flex justify-between items-center mb-4 border-b pb-2">
                <h3 class="text-xl font-bold text-gray-800"><i class="fas fa-file-signature mr-2 text-blue-600"></i>標準化保密協定 (NDA) 簽署</h3>
                <button onclick="closeModal('ndaModal')" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times"></i></button>
            </div>

            <div class="legal-paper mb-4 custom-scrollbar">
                <h4 class="text-center font-bold mb-4 text-lg">NON-DISCLOSURE AGREEMENT</h4>
                <p class="mb-2"><strong>THIS AGREEMENT</strong> is made on <span id="todayDate" class="underline"></span> between:</p>
                <p class="mb-4">(1) <strong>Platform User</strong> (the "Disclosing Party"); and <br> (2) <strong>Potential Buyer</strong> (the "Receiving Party").</p>
                <p class="mb-2 font-bold">1. Definition of Confidential Information</p>
                <p class="mb-4">"Confidential Information" means all information disclosed by the Disclosing Party to the Receiving Party, including but not limited to financial statements, customer lists, trade secrets, and technical data.</p>
                <p class="mb-2 font-bold">2. Obligations</p>
                <p class="mb-4">The Receiving Party agrees to hold and maintain the Confidential Information in strictest confidence for the sole and exclusive benefit of the Disclosing Party.</p>
                <p class="mb-2 font-bold">3. Term</p>
                <p class="mb-4">The obligations of this Agreement shall survive for a period of two (2) years from the date hereof.</p>
                <p class="mb-4 text-gray-400">[...Scroll down to sign...]</p>
                <p class="mb-2 font-bold">4. Governing Law</p>
                <p class="mb-4">This Agreement shall be governed by and construed in accordance with the laws of Taiwan (R.O.C).</p>
            </div>

            <div id="signSection">
                <div class="flex items-end gap-4">
                    <div class="flex-grow">
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Authorized Signature (Type Name)</label>
                        <input type="text" id="signerName" class="w-full border-b-2 border-gray-300 bg-gray-50 p-2 focus:border-blue-500 outline-none font-serif text-lg" placeholder="請輸入您的全名以示簽署">
                    </div>
                    <button onclick="signNDA()" class="bg-blue-600 text-white px-6 py-2 rounded shadow hover:bg-blue-700 transition font-bold">
                        數位簽署
                    </button>
                </div>
            </div>

            <div id="signedStatus" class="hidden border-t mt-4 pt-4">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-sm text-green-700 font-bold"><i class="fas fa-check-circle"></i> 簽署完成 (Legally Binding)</p>
                        <p class="text-xs text-gray-500">Hash: 8f434346-3ad0-4e59... <span id="signTime"></span></p>
                    </div>
                    <div class="stamp">DIGITALLY SIGNED</div>
                </div>
                <button onclick="closeModal('ndaModal')" class="w-full mt-4 bg-gray-100 text-gray-600 py-2 rounded hover:bg-gray-200 text-sm">
                    下載副本並關閉
                </button>
            </div>
        </div>
    </div>

    <div id="landing" class="min-h-screen pt-24 pb-10 px-6 container mx-auto fade-in">
        <div class="text-center mb-12">
            <h1 class="text-3xl md:text-5xl font-bold mb-6 text-gray-800">請選擇企業當前的情境</h1>
            <p class="text-xl text-gray-600">我們依據報告分析，針對不同階段的中小企業提供對應的平台解決方案</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
            <div onclick="showSection('consultant')" class="bg-white rounded-xl shadow-lg hover:shadow-2xl transition cursor-pointer border-t-8 border-blue-800 group relative overflow-hidden p-8">
                <div class="mb-6 text-center">
                    <div class="w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition">
                        <i class="fas fa-user-injured text-3xl text-blue-800"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800">剛萌生退意，家族溝通卡關</h3>
                    <p class="text-sm text-gray-500 mt-2">60歲 傳統餐飲業老闆</p>
                </div>
                <button class="w-full bg-blue-800 text-white py-3 rounded-lg font-bold hover:bg-blue-900 transition">進入【顧問型平台】</button>
            </div>

            <div onclick="showSection('comprehensive')" class="bg-white rounded-xl shadow-lg hover:shadow-2xl transition cursor-pointer border-t-8 border-yellow-500 group relative overflow-hidden p-8">
                <div class="mb-6 text-center">
                    <div class="w-20 h-20 bg-yellow-50 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition">
                        <i class="fas fa-bullhorn text-3xl text-yellow-600"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800">確認出售，需要市場曝光</h3>
                    <p class="text-sm text-gray-500 mt-2">35歲 軟體新創創辦人</p>
                </div>
                <button class="w-full bg-yellow-500 text-white py-3 rounded-lg font-bold hover:bg-yellow-600 transition">進入【綜合型平台】</button>
            </div>

            <div onclick="showSection('closed')" class="bg-white rounded-xl shadow-lg hover:shadow-2xl transition cursor-pointer border-t-8 border-gray-800 group relative overflow-hidden p-8">
                <div class="mb-6 text-center">
                    <div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition">
                        <i class="fas fa-user-secret text-3xl text-gray-800"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800">深度談判，涉及敏感資訊</h3>
                    <p class="text-sm text-gray-500 mt-2">70歲 精密機械董事長</p>
                </div>
                <button class="w-full bg-gray-800 text-white py-3 rounded-lg font-bold hover:bg-gray-900 transition">進入【封閉型平台】</button>
            </div>
        </div>
    </div>

    <div id="consultant" class="hidden-section min-h-screen pt-20 fade-in bg-blue-50">
        <div class="container mx-auto px-6">
            <button onclick="showSection('landing')" class="mb-4 text-blue-800 hover:underline font-bold"><i class="fas fa-arrow-left"></i> 返回情境選擇</button>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-blue-800 h-fit">
                    <h2 class="text-2xl font-bold text-blue-900 mb-4">顧問型平台</h2>
                    <p class="text-gray-600 text-sm mb-4">針對尚未準備好的企業，提供心理輔導與財務體檢 [cite: 200-202]。</p>
                    <ul class="space-y-2 text-sm text-gray-700">
                        <li><i class="fas fa-check text-blue-500 mr-2"></i>心理/意願輔導</li>
                        <li><i class="fas fa-check text-blue-500 mr-2"></i>初步估值與資訊整備</li>
                    </ul>
                </div>
                <div class="lg:col-span-2 bg-white rounded-xl shadow-lg p-8">
                    <h3 class="text-lg font-bold mb-4 text-gray-700">企業體質與意願診斷</h3>
                    <div class="bg-gray-100 p-6 rounded-lg text-center">
                        <p class="text-gray-600 mb-4">顧問型介面著重於「教育」與「引導」，而非直接交易。</p>
                        <div class="w-full bg-gray-300 rounded-full h-4 mb-2">
                            <div class="bg-blue-600 h-4 rounded-full" style="width: 40%"></div>
                        </div>
                        <p class="text-xs text-blue-600">接班準備度：40% (建議先進行財務重整)</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="comprehensive" class="hidden-section min-h-screen pt-20 fade-in bg-yellow-50">
        <div class="container mx-auto px-6">
            <button onclick="showSection('landing')" class="mb-4 text-yellow-700 hover:underline font-bold"><i class="fas fa-arrow-left"></i> 返回情境選擇</button>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-yellow-500 h-fit">
                    <h2 class="text-2xl font-bold text-yellow-700 mb-4">綜合型平台</h2>
                    <p class="text-gray-600 text-sm mb-4">透過數位工具與標準化流程，降低資訊不對稱 。</p>
                    <ul class="space-y-3 text-gray-700 text-sm">
                        <li class="bg-yellow-50 p-2 rounded border border-yellow-200">
                            <strong><i class="fas fa-bullseye mr-2"></i>智能媒合</strong><br>
                            資料審核與企業篩選
                        </li>
                        <li class="bg-yellow-50 p-2 rounded border border-yellow-200">
                            <strong><i class="fas fa-file-contract mr-2"></i>標準化工具</strong><br>
                            NDA、線上估值工具
                        </li>
                    </ul>
                </div>

                <div class="lg:col-span-2 bg-white rounded-xl shadow-lg overflow-hidden">
                    <div class="bg-gray-50 border-b p-4 flex justify-between items-center">
                        <span class="font-bold text-gray-700">平台工具演示 (Interactive Tools)</span>
                        <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded">Live Demo</span>
                    </div>
                    <div class="p-6">
                        <div class="flex flex-col md:flex-row gap-4 mb-6">
                            <div onclick="openModal('valuationModal')" class="flex-1 bg-white border-2 border-yellow-100 p-4 rounded-lg shadow-sm flex items-center cursor-pointer hover:border-yellow-400 hover:shadow-md transition group">
                                <div class="bg-yellow-100 w-12 h-12 rounded-full flex items-center justify-center mr-4 group-hover:bg-yellow-500 group-hover:text-white transition">
                                    <i class="fas fa-calculator text-xl text-yellow-600 group-hover:text-white"></i>
                                </div>
                                <div>
                                    <div class="font-bold text-gray-800">線上自動估值</div>
                                    <div class="text-xs text-gray-500">輸入財報，AI即時運算價格</div>
                                </div>
                            </div>
                            <div onclick="openModal('ndaModal')" class="flex-1 bg-white border-2 border-blue-100 p-4 rounded-lg shadow-sm flex items-center cursor-pointer hover:border-blue-400 hover:shadow-md transition group">
                                <div class="bg-blue-100 w-12 h-12 rounded-full flex items-center justify-center mr-4 group-hover:bg-blue-600 group-hover:text-white transition">
                                    <i class="fas fa-file-signature text-xl text-blue-600 group-hover:text-white"></i>
                                </div>
                                <div>
                                    <div class="font-bold text-gray-800">簽署保密協定 (NDA)</div>
                                    <div class="text-xs text-gray-500">模擬數位簽約與時間戳記</div>
                                </div>
                            </div>
                        </div>

                        <h3 class="text-sm font-bold text-gray-500 mb-3 uppercase">推薦買家清單 (Matched Buyers)</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition">
                                <div class="flex items-center">
                                    <div class="bg-yellow-100 text-yellow-700 w-10 h-10 rounded flex items-center justify-center font-bold mr-3">A</div>
                                    <div>
                                        <div class="font-bold text-gray-800">教育科技控股集團</div>
                                        <div class="text-xs text-gray-500"><i class="fas fa-check-circle text-green-500"></i> 資料已審核</div>
                                    </div>
                                </div>
                                <button class="text-xs bg-gray-100 px-3 py-1 rounded">等待簽署 NDA</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="closed" class="hidden-section min-h-screen pt-20 fade-in bg-gray-900 text-white">
        <div class="container mx-auto px-6">
            <button onclick="showSection('landing')" class="mb-4 text-gray-400 hover:text-white font-bold"><i class="fas fa-arrow-left"></i> 返回情境選擇</button>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg border-l-4 border-gray-500 h-fit">
                    <h2 class="text-2xl font-bold text-white mb-4">封閉型平台</h2>
                    <p class="text-gray-300 text-sm mb-4">針對高敏感案件，提供VDR與履約保證 [cite: 208-209]。</p>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><i class="fas fa-lock text-green-500 mr-2"></i>虛擬資料室 (VDR)</li>
                        <li><i class="fas fa-balance-scale text-green-500 mr-2"></i>Escrow 履約保證</li>
                    </ul>
                </div>
                <div class="lg:col-span-2 bg-gray-800 p-8 rounded-lg border border-gray-700">
                    <h3 class="font-bold text-gray-200 mb-4">VDR 資料室展示</h3>
                    <div class="bg-gray-700 p-4 rounded flex justify-between items-center">
                        <div class="flex items-center">
                            <i class="fas fa-file-pdf text-red-400 mr-3"></i>
                            <div>
                                <div class="font-bold">關鍵專利技術書.pdf</div>
                                <div class="text-xs text-gray-400">加密等級：AES-256</div>
                            </div>
                        </div>
                        <button class="text-xs bg-gray-900 px-3 py-1 rounded text-gray-400">權限鎖定</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 頁面切換邏輯
        function showSection(sectionId) {
            ['landing', 'consultant', 'comprehensive', 'closed'].forEach(id => {
                document.getElementById(id).classList.add('hidden-section');
            });
            const selected = document.getElementById(sectionId);
            selected.classList.remove('hidden-section');
            selected.classList.remove('fade-in');
            void selected.offsetWidth;
            selected.classList.add('fade-in');
            window.scrollTo(0, 0);
        }

        // Modal 開關邏輯
        function openModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
            // 重置 NDA 日期
            if(modalId === 'ndaModal') {
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('todayDate').innerText = today;
            }
        }
        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
            // 重置估值狀態
            if(modalId === 'valuationModal') {
                document.getElementById('valuationInput').classList.remove('hidden');
                document.getElementById('valuationLoading').classList.add('hidden');
                document.getElementById('valuationResult').classList.add('hidden');
                document.getElementById('revenue').value = '';
                document.getElementById('ebitda').value = '';
            }
            // 重置 NDA 狀態
            if(modalId === 'ndaModal') {
                document.getElementById('signSection').classList.remove('hidden');
                document.getElementById('signedStatus').classList.add('hidden');
                document.getElementById('signerName').value = '';
            }
        }

        // 功能 1: 估值運算邏輯
        function runValuation() {
            const rev = document.getElementById('revenue').value;
            const ebitda = document.getElementById('ebitda').value;
            const industry = document.getElementById('industry').value;

            if (!rev || !ebitda) {
                alert('請輸入完整的財務數字');
                return;
            }

            // 1. 切換到 Loading
            document.getElementById('valuationInput').classList.add('hidden');
            document.getElementById('valuationLoading').classList.remove('hidden');

            // 2. 模擬運算 (延遲 1.5 秒)
            setTimeout(() => {
                document.getElementById('valuationLoading').classList.add('hidden');
                document.getElementById('valuationResult').classList.remove('hidden');

                // 簡單的估值倍數邏輯
                let multiplier = 3;
                if (industry === 'software') multiplier = 6;
                else if (industry === 'manufacturing') multiplier = 4;

                // 加上隨機波動讓數字看起來真實
                const baseVal = (ebitda * multiplier);
                const minVal = Math.floor((baseVal * 0.9) / 10000); // 萬
                const maxVal = Math.floor((baseVal * 1.2) / 10000); // 萬

                document.getElementById('valMin').innerText = minVal.toLocaleString();
                document.getElementById('valMax').innerText = maxVal.toLocaleString();

            }, 1500);
        }

        // 功能 2: NDA 簽署邏輯
        function signNDA() {
            const name = document.getElementById('signerName').value;
            if (!name) {
                alert('請輸入簽署人姓名');
                return;
            }

            document.getElementById('signSection').classList.add('hidden');
            document.getElementById('signedStatus').classList.remove('hidden');
            
            const now = new Date();
            document.getElementById('signTime').innerText = now.toLocaleString();
        }
    </script>
</body>
</html>
